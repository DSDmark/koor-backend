<!DOCTYPE html>
{% load static %}
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="{% static 'custom-admin/css/chat.css' %}" />
  </head>
  <body style="overflow: hidden">
    <div id="frame">
      <div id="sidepanel">
        <div id="search">
          <img
            src="/static_root/img/profile.png"
            alt=""
            class="profile-logo"
            style="margin: 8px 0px 0px 19px"
          />
          <input type="text" placeholder="Search contacts..." />
          <label for=""><i class="fa fa-search" aria-hidden="true"></i></label>
        </div>
        <div id="contacts">
          <ul class="userlist">
            <li class="contact">
              <div class="wrap">
                <span class="contact-status"></span>
                <img
                  src="http://emilcarlsson.se/assets/jonathansidwell.png"
                  alt=""
                />
                <div class="meta">
                  <p class="name position-relative">Jonathan Sidwell</p>
                  <div class="text-end timer">
                    <p class="mb-0">07:09 PM</p>
                  </div>
                  <p class="preview">
                    <span>You:</span> That's bullshit. This deal is solid.
                  </p>
                </div>
              </div>
            </li>
            <li class="contact active">
              <div class="wrap">
                <span class="contact-status"></span>
                <img
                  src="http://emilcarlsson.se/assets/jonathansidwell.png"
                  alt=""
                />
                <div class="meta">
                  <p class="name position-relative">Jonathan Sidwell</p>
                  <div class="text-end timer">
                    <p class="mb-0">07:09 PM</p>
                  </div>
                  <p class="preview">
                    <span>You:</span> That's bullshit. This deal is solid.
                  </p>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class="content">
        <div class="contact-profile">
          <img src="http://emilcarlsson.se/assets/harveyspecter.png" alt="" />
          <p class="user-name">Harvey Specter</p>
          <p class="useractive">Active</p>
        </div>
        <div class="messages">
          <ul class="slide">
            <li class="replies">
              <p class="position-relative">
                How the hell am I supposed to get a jury to believe you when I
                am not even sure that I do?!
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="sent">
              <p>
                When you're backed against the wall, break the god damn thing
                down.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              
              <p class="position-relative">
                How the hell am I supposed to get a jury to believe you when I
                am not even sure that I do?!
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="sent">
             
              <p>
                When you're backed against the wall, break the god damn thing
                down.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              
              <p class="position-relative">
                How the hell am I supposed to get a jury to believe you when I
                am not even sure that I do?!
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="sent">
             
              <p>
                When you're backed against the wall, break the god damn thing
                down.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              
              <p class="position-relative">
                How the hell am I supposed to get a jury to believe you when I
                am not even sure that I do?!
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="sent">
             
              <p>
                When you're backed against the wall, break the god damn thing
                down.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              
              <p class="position-relative">
                How the hell am I supposed to get a jury to believe you when I
                am not even sure that I do?!
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="sent">
             
              <p>
                When you're backed against the wall, break the god damn thing
                down.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              
              <p class="position-relative">
                How the hell am I supposed to get a jury to believe you when I
                am not even sure that I do?!
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="sent">
             
              <p>
                When you're backed against the wall, break the god damn thing
                down.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              
              <p class="position-relative">
                How the hell am I supposed to get a jury to believe you when I
                am not even sure that I do?!
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="sent">
             
              <p>
                When you're backed against the wall, break the god damn thing
                down.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              
              <p class="position-relative">
                How the hell am I supposed to get a jury to believe you when I
                am not even sure that I do?!
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="sent">
             
              <p>
                When you're backed against the wall, break the god damn thing
                down.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              
              <p>Excuses don't win championships.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="message-date">
              <p>17/04/23</p>
            </li>
            <li class="sent">
              <p>
                Oh yeah, did Michael Jordan tell you that?
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              <p>
                No, I told him that. <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              <p>
                What are your choices when someone puts a gun to your head?
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="replies">
              <div class="chatimg">
                <img
                  src="http://emilcarlsson.se/assets/mikeross.png"
                  class="repliesimg"
                  alt=""
                />
                <p class="repliesattachment">12:23PM</p>
              </div>
            </li>
            <li class="sent">
              <p>
                What are you talking about? You do what they say or they shoot
                you.
                <span class="msg-timer">12:30 PM</span>
              </p>
            </li>
            <li class="sent">
              <div class="chat">
                <img
                  src="http://emilcarlsson.se/assets/mikeross.png"
                  class="sentimg"
                  alt=""
                />
                <p class="repliesattachment">12:23PM</p>
              </div>
            </li>
            <li class="sent">
              <div class="document">
                <div class="documendata">
                  <div class="filename">
                    <i class="fa fa-file" aria-hidden="true"></i>
                    <h6 class="file">
                      filename
                      <br />
                      <p class="filedata">123345</p>
                    </h6>
                  </div>
                  <div class="download">
                    <i class="fa fa-arrow-circle-o-down" aria-hidden="true"></i>
                  </div>
                </div>
                <p class="repliesattachment">12:23PM</p>
              </div>
            </li>
            <li class="replies">
              <div class="document-reply">
                <div class="documendata-reply">
                  <div class="filename">
                    <i class="fa fa-file" aria-hidden="true"></i>
                    <h6 class="file">
                      filename
                      <br />
                      <p class="filedata">123345</p>
                    </h6>
                  </div>
                  <div class="download">
                    <i class="fa fa-arrow-circle-o-down" aria-hidden="true"></i>
                  </div>
                </div>
                <p class="repliesattachment">12:23PM</p>
              </div>
            </li>
          </ul>
        </div>
        <div class="message-input">
          <div class="wrap">
            <input type="text" placeholder="Write your message..." />
            <i class="fa fa-paperclip attachment" aria-hidden="true"></i>
            <input type="file" class="attachment" name="" />
            <button class="submit">
              <i class="fa fa-paper-plane" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

    <script>
      $(".messages").animate({ scrollTop: $(document).height() }, "fast");

      $("#profile-img").click(function () {
        $("#status-options").toggleClass("active");
      });

      $(".expand-button").click(function () {
        $("#profile").toggleClass("expanded");
        $("#contacts").toggleClass("expanded");
      });

      $("#status-options ul li").click(function () {
        $("#profile-img").removeClass();
        $("#status-online").removeClass("active");
        $("#status-away").removeClass("active");
        $("#status-busy").removeClass("active");
        $("#status-offline").removeClass("active");
        $(this).addClass("active");

        if ($("#status-online").hasClass("active")) {
          $("#profile-img").addClass("online");
        } else if ($("#status-away").hasClass("active")) {
          $("#profile-img").addClass("away");
        } else if ($("#status-busy").hasClass("active")) {
          $("#profile-img").addClass("busy");
        } else if ($("#status-offline").hasClass("active")) {
          $("#profile-img").addClass("offline");
        } else {
          $("#profile-img").removeClass();
        }

        $("#status-options").removeClass("active");
      });

      function newMessage() {
        message = $(".message-input input").val();
        if ($.trim(message) == "") {
          return false;
        }
        $(
          `<li class="replies">
            <p>
              ${message}
              <span class="msg-timer">12:30 PM</span>
            </p>
          </li>`
        ).appendTo($(".messages ul"));
        $(".message-input input").val(null);
        $(".contact.active .preview").html("<span>You: </span>" + message);
        $(".messages").animate({ scrollTop: $(document).height() }, "fast");
      }

      $(".submit").click(function () {
        newMessage();
      });

      $(window).on("keydown", function (e) {
        if (e.which == 13) {
          newMessage();
          return false;
        }
      });
      const chatSocket = new WebSocket(`ws://${window.location.host}/ws/unreads/PAW20230302/`);
      
      const setupWebSocket = () => {
        chatSocket.onmessage = (event) => {
          var data = JSON.parse(event.data)
          console.log(data);
        };
      };
      setupWebSocket();

    </script>
  </body>
</html>
